<p align="center">
<a href="https://www.adjoint.io">
  <img width="250" src="./.assets/adjoint.png" alt="Adjoint Logo" />
</a>
</p>

[![Build Status](https://github.com/adjoint-io/zkp/workflows/Cabal%20CI/badge.svg)](https://github.com/adjoint-io/zkp/actions)
[![Build Status](https://github.com/adjoint-io/zkp/workflows/Stack%20CI/badge.svg)](https://github.com/adjoint-io/zkp/actions)

é›¶çŸ¥è¯†è¯æ˜
==========

* [ğŸ‡ºğŸ‡¸English ](./README.md)
* [ğŸ‡¨ğŸ‡³ä¸­æ–‡](./README.zh.md)
* [ğŸ‡©ğŸ‡ªDeutsch](./README.de.md)

ZKPæ˜¯ä¸€ç§å®ç”¨çš„é›¶çŸ¥è¯†è¯æ˜ç³»ç»Ÿï¼Œå¯æä¾›ä»»æ„è®¡ç®—çš„å°å‹ä¸”è®¡ç®—æ•ˆç‡é«˜çš„é›¶çŸ¥è¯†è¯æ˜ã€‚
è¯¥ç³»ç»Ÿä½¿æˆ‘ä»¬èƒ½å¤Ÿä»¥å»‰ä»·ä¸”å¿«é€Ÿçš„éªŒè¯æ—¶é—´æ„é€ ç®€æ´çš„éäº¤äº’å¼è¯æ˜ã€‚
ä¸‹å›¾æè¿°äº†è¯æ˜ç”Ÿæˆç³»ç»Ÿçš„æ‹“æ‰‘ã€‚

è¯¥åè®®å…è®¸ä¸å—ä¿¡ä»»çš„å„æ–¹å½¼æ­¤è¿›è¡Œäº¤æ˜“ï¼Œè€Œæ— éœ€å…±äº«ä¿¡æ¯ã€‚

è¿™æ˜¯ç”¨äºæ„å»ºzk-SNARKçš„å¯†ç åº“ã€‚è¯¥åº“å¯ä¸ºè´¢åŠ¡åˆ†å¸ƒå¼æ•°æ®åº“å®ç°äº¤æ˜“éšç§ã€‚

ä¸‹å›¾æè¿°äº†è¯æ˜ç”Ÿæˆç³»ç»Ÿçš„æ‹“æ‰‘ã€‚

<p align="center">
<img width="600px" src="./.assets/groth16_zh.png" alt="Groth16" />
</p>

## ç¼–è¯‘æ­¥éª¤

* ç”µè·¯æ„é€ 
* å€¼å¾—ä¿¡èµ–çš„è®¾ç½®
* è¯æ˜åˆ¶ä½œ
* è¯æ˜éªŒè¯

<!-- Program Construction -->
## ç¨‹åºå»ºè®¾

ç¨‹åºæ„å»ºæ˜¯ç”±å…¶ä»–åº“å¼€å‘çš„ï¼Œè¿™äº›åº“å‘å‡ºæ ‡å‡†çš„JSONåè®®ï¼Œè¯¥åè®®æè¿°äº†é—¨çš„åŠŸèƒ½ç»„æˆï¼Œè¿™äº›é—¨è®¡ç®—åŠ æ³•ï¼Œä¹˜æ³•å’Œå¸¦å¯¼çº¿çš„ç®—æœ¯è¿ç®—ã€‚
è¯¥åº“å¯ä»¥ç®€å•åœ°ä½¿ç”¨ä»»ä½•å…¶ä»–ç¼–è¯‘å™¨æˆ–åº“æ¥å‘å‡ºJSONä½œä¸ºå…¶äº¤æ¢æ ¼å¼ã€‚

ç®—æœ¯ç”µè·¯åŒ…æä¾›äº†ç”µè·¯æ„é€ è¯­è¨€çš„å‚è€ƒåº“ã€‚

[arithmetic-circuits](https://www.github.com/adjoint-io/arithmetic-circuits)

<!-- Trusted Setup -->
## å—ä¿¡ä»»çš„è®¾ç½®

å¯ä»¥ä»å‘½ä»¤è¡Œè¿è¡Œå—ä¿¡ä»»çš„è®¾ç½®ã€‚ è¿™å°†ç”Ÿæˆä¸ºç‰¹å®šç”µè·¯è®¾ç½®æ‰€éœ€çš„ä¸€æ¬¡å‚æ•°ã€‚ è®¾ç½®å‚æ•°å¯ä»¥éšåé”€æ¯ï¼Œä¹Ÿå¯ä»¥åœ¨Shamirç§˜å¯†å…±äº«é…ç½®ä¸­åˆ†å‘ã€‚ Shamirå…±äº«å…è®¸ä¸€ä¸ªn-of-mçš„è®¾ç½®ï¼Œå…¶ä¸­è‡³å°‘nä¸ªå‚ä¸è€…å¿…é¡»ç»„åˆå…¶ç§˜å¯†éƒ¨åˆ†ä»¥é‡å»ºå—ä¿¡ä»»çš„è®¾ç½®ã€‚

```bash
zkp setup --prover Groth16 --input samples/example1.json -o setupdir 
```

è¿™å°†åœ¨setupdirç›®å½•ä¸­ç”Ÿæˆå—ä¿¡ä»»çš„è®¾ç½®å‚æ•°ã€‚ æ¥è‡ªBN254æ¤­åœ†æ›²çº¿çš„ç´ æ•°åœºFrçš„è¿™äº”ä¸ªéšæœºå‚æ•°ï¼ˆÎ±ï¼ŒÎ²ï¼Œğ›¾ï¼ŒÎ´ï¼Œxï¼‰ã€‚

```haskell
RandomSetup
  { setupAlpha =
      P 12256559805687004284032990640481138455228350420895296477627313054450750333538
  , setupBeta =
      P 4401553107086663101145669242467980542018664489189708849056812824771109996937
  , setupGamma =
      P 11751086019938025633396747311851452921508835627313304853903993116945166687533
  , setupDelta =
      P 168604024821165987426171350616143663866971217710026689954359697680025921731
  , setupX =
      P 17090290750981977232640417368259094286138615605287635462955897488010126230557
  }
```

å¦‚æœæ‚¨å¸Œæœ›ä½¿ç”¨å†…æ ¸ä¸­çš„ç¡¬ä»¶ç†µæ¥æ‰§è¡Œéšæœºç”Ÿæˆï¼Œè¯·åœ¨å—ä¿¡ä»»çš„è®¾ç½®è¿‡ç¨‹ä¸­ä¼ é€’--hardwareæ ‡å¿—ã€‚

<!-- Trusted Proof Generation -->
## è¯æ˜ç”Ÿæˆ

å¯¹äºç»™å®šçš„ä¸€ç»„æœ‰æ•ˆè¾“å…¥ï¼ˆ-aï¼‰ï¼Œè¿™å°†åœ¨è¾“å‡ºç›®å½•å†…éƒ¨ç”Ÿæˆè¯æ˜é¡¹piã€‚ å¦‚æœä½¿ç”¨ç»™å®šçš„å¯ä¿¡è®¾ç½®å’Œä¸“ç”¨è¾“å…¥å¯¹ç”µè·¯è¿›è¡Œè¯„ä¼°ï¼Œåˆ™å…¶ä¸­åŒ…å«ç®€æ´çš„é›¶çŸ¥è¯†è¯æ˜ã€‚

```bash
zkp prove --input samples/example1.json -d setupdir --inputs samples/inputs1.json --pi proof
```

è¿™å°†ç”Ÿæˆä¸€ä¸ªÏ€è¯æ˜é¡¹ï¼Œè¯¥é¡¹ç”±åŒçº¿æ€§æ˜ å°„A : G<sub>2</sub>ï¼ŒB : G<sub>1</sub>å’Œ C:G<sub>1</sub> ä¸­çš„ä¸‰ä¸ªé¡¹ç»„æˆã€‚

```haskell
Proof
  { proofA =
      A (P 4881623700312852323508547682818174690864977127565225101692969747455865314076)
        (P 21226270279582811012422188678741405568697460494611910557066940647978844558004)
  , proofB =
      A (E (P 20323099801991325872207033941577805160427313780137510282152872074461606067272 *
              X +
              P 1422252355533785307633747654423585463232482725315893764382065912760224949248))
        (E (P 3567658277931205602889970963406800124094834788390622140804820116722346374274 *
              X +
              P 15030027696371368845331628915595104373945089162840261486371773861661834388966))
  , proofC =
      A (P 21113978983642622273905001525315900726975017023639887701995527379031005434733)
        (P 1703880359115562486637532379447225273456712398817044635461020607254025768226)
  }
```

<!-- Proof Verification -->
## è¯æ˜éªŒè¯

éªŒè¯ç®—æ³•å°†å—é™çš„å…¬å…±å‚è€ƒå­—ç¬¦ä¸²å’Œè¯æ˜é¡¹ï¼ˆ--piï¼‰ä½œä¸ºè¾“å…¥ï¼Œè®¡ç®—æœ€ç»ˆé…å¯¹æ“ä½œä»¥éªŒè¯éšåè¯æ˜çš„å®Œæ•´æ€§ï¼Œå¹¶ä»¥æ‹’ç»æˆ–æ¥å—ä½œä¸ºé€€å‡ºç è¿”å›ã€‚

```bash
zkp verify -d setupdir --inputs samples/inputs1.json --pi proof
```

<!-- Proof Servers -->
## æ•°å­¦è¯æ˜æœåŠ¡å™¨

æœ‰å¤šç§è¯æ˜æœåŠ¡ï¼Œå…è®¸å…¬å…±ç”¨æˆ·è¿›è¡Œæ—¶é—´æˆ³è®°å¹¶ä»¥æ•°å­—æ–¹å¼ç­¾ç½²é›¶çŸ¥è¯†è¯æ˜çš„è¾“å‡ºã€‚ Adjointåœ¨æ­¤å¤„æ‰˜ç®¡å…¬å…±è¯æ˜æœåŠ¡å™¨ã€‚

[dragon.adjoint.io](https://adjoint-io.github.io/dragon-website/index_zh.html)

<!-- Curves -->
## æ¤­åœ†æ›²çº¿

è¯¥è¯æ˜ç³»ç»Ÿä½¿ç”¨æ¤­åœ†æ›²çº¿æ“ä½œçš„å¤šæ€è¡¨ç¤ºå½¢å¼ï¼Œä½¿æˆ‘ä»¬å¯ä»¥åœ¨å¤šä¸ªæ¤­åœ†æ›²çº¿ä¸Šå®ä¾‹åŒ–è¯æ˜è€…ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š

* BLS12-381
* BN254

<!-- Building from Source -->
## ä»æºå¤´å»ºé€ 

è¯¥åº“åœ¨Haskellç¼–è¯‘å™¨çš„8.xä¸Šç¼–è¯‘ã€‚ è¦å®‰è£…GHCï¼Œè¯·ä½¿ç”¨[ghcup](https://www.haskell.org/ghcup/)ã€‚

```bash
ghcup install 8.6.5
```

è®¾ç½®GHCåï¼Œä¸‹è½½æ­¤åº“å¹¶ä½¿ç”¨cabalè¿›è¡Œæ„å»ºã€‚

```bash
git clone git@github.com:adjoint-io/zkp.git
cd zkp
cabal new-install --installdir=.
cp ./zkp ~/.local/bin
```

å¦å¤–ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨[Stack](https://docs.haskellstack.org/en/stable/README/)ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ„å»ºåº“ï¼š

```bash
cd zkp
stack install
```

<!-- Docker Images -->
## Dockeræ˜ åƒ

å¯ä»¥åœ¨Dockeræ˜ åƒå†…éƒ¨æ„å»ºå’Œè¿è¡Œzkpå¯æ‰§è¡Œæ–‡ä»¶ï¼š

```bash
$ docker build -t zkp .
$ docker run -ti zkp /bin/bash
```

<!-- Verification -->

## éªŒè¯

*è¿™æ˜¯å¯é€‰æ­¥éª¤ï¼Œä»…é€‚ç”¨äºå¼€å‘äººå‘˜ã€‚*

ZKPé€šè¿‡ç²¾åŒ–ç±»å‹ä¸°å¯Œäº†ä¸€ç³»åˆ—è§„èŒƒï¼Œè¿™äº›è§„èŒƒå¯ä»¥åœ¨LiquidHaskellæ¡†æ¶ä¸­è¿›è¡Œæ£€æŸ¥ã€‚ LiquidHaskellåˆ†ææ¨¡å—ï¼Œå¹¶å‘SMTæ±‚è§£å™¨å±¥è¡Œè¯æ˜ä¹‰åŠ¡ï¼Œä»¥æŸ¥çœ‹æ¡ä»¶æ˜¯å¦å¯æ»¡è¶³ã€‚ è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿè¯æ˜åœ¨å†…å­˜å®‰å…¨æ€§ï¼Œç®—æœ¯å¼‚å¸¸å’Œä¿¡æ¯æµæ–¹é¢ä¸å­˜åœ¨ä¸€ç³»åˆ—é”™è¯¯ã€‚

æ‚¨å°†éœ€è¦Microsoft Research [Z3 SMT](https://github.com/Z3Prover/z3)æ±‚è§£å™¨æˆ–Stanford [CVC4 SMT](https://cvc4.github.io/)æ±‚è§£å™¨ã€‚

å¯¹äºLinuxï¼š

```bash
sudo apt install z3 # z3
sudo apt install cvc4 # cvc4
```

å¯¹äºMacï¼š

```bash
brew tap z3 # z3
brew tap cvc4/cvc4 # cvc4
brew install cvc4/cvc4/cvc4
```

ç„¶åä½¿ç”¨Cabalæˆ–Stackå®‰è£…LiquidHaskellï¼š

```bash
cabal install liquidhaskell
stack install liquidhaskell
```

ç„¶åå¯ä»¥åœ¨è¯¥é¡¹ç›®ä¸­çš„åŠ å¯†æ¨¡å—ä¸Šè¿è¡ŒéªŒè¯ã€‚

```bash
liquid -f --cabaldir -i src -i spec src/Poly.hs
liquid -f --cabaldir -i src -i spec src/Protocol/Groth.hs 
```

<!-- Dependencies -->

## åº“ä¾èµ–

è¯¥ç³»ç»Ÿå–å†³äºä»¥ä¸‹ä¾èµ–æ€§ã€‚

* [é›¶çŸ¥è¯†è¯æ˜ç³»ç»Ÿçš„ç®—æœ¯ç”µè·¯](https://www.github.com/adjoint-io/arithmetic-circuits)
* [ä¹Ÿå«åŒçº¿æ€§æ˜ å°„](https://www.github.com/adjoint-io/pairing)
* [ç”Ÿæˆç¡¬ä»¶ç†µä»¥å®ç°å®‰å…¨å¯ä¿¡çš„è®¾ç½®](https://hackage.haskell.org/package/entropy)
* [æœ‰é™åŸŸç®—æœ¯](https://www.github.com/adjoint-io/galois-field)
* [åŸºäºå¿«é€Ÿå‚…ç«‹å¶å˜æ¢çš„æœ‰é™åŸŸå¤šé¡¹å¼ç®—æ³•](https://www.github.com/adjoint-io/galois-fft)
* [æ¤­åœ†æ›²çº¿è¿ç®—](https://www.github.com/adjoint-io/elliptic-curve)
* [æ•°è®ºè¿ç®—](https://hackage.haskell.org/package/arithmoi)
* [ä»£æ•°åŠç¯](https://www.github.com/adjoint-io/semirings)
* [é«˜æ•ˆçš„å¤šé¡¹å¼ç®—æ³•](https://www.github.com/adjoint-io/poly)
* [Shamirç§˜å¯†åˆ†äº«](https://www.github.com/adjoint-io/shamir)
